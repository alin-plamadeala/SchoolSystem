<script src="/js/pagination.min.js"></script>
<script src="/js/papaparse.min.js"></script>
<div id="list"></div>


<div class="form-row">
    <div class="col-sm-2">
        <small class=" text-uppercase text-muted">Accounts</small>
        <p class=" h3 text-info">{{{userList.length}}}</p>
    </div>
    <div class="col-sm my-auto pr-0 text-right">
        <button type="button" class="btn btn-outline-secondary" id="addUserButton" onclick="newUser()">
            <span><i class="fas fa-plus"></i></span>
            Add user
        </button>
        <button type="button" class="btn btn-outline-secondary mr-1" id="importUsersButton" data-toggle="modal"
            data-target="#importUsers">
            <span><i class="fas fa-file-import"></i></span>
            Import users
        </button>
        <button type="button" class="btn btn-outline-secondary mr-1" id="removeFiltersButton" style="display: none;"
            onclick="removeFilters()">
            <span class="fa-layers fa-fw">
                <i class="fas fa-filter" data-fa-transform="left-2"></i>
                <i class="fas fa-times" data-fa-transform="shrink-8 down-3 right-5"></i>
            </span>
            Remove fiters
        </button>
    </div>
    <div class="col-sm-2 my-auto">
        <select class="form-control" id="selectGroup">
            <option value="" selected disabled hidden>Any group</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
    </div>
    <div class="col-sm-3 my-auto pl-0">
        <form action="javascript:;" onsubmit="search()" id="search-form">
            <div class="input-group my-auto">
                <input type="search" class="form-control" placeholder="Search..." aria-label="Recipient's username"
                    aria-label="Search" id="search-input">
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="submit" id="button-addon2"><i
                            class="fas fa-search"></i></button>
                </div>
            </div>
        </form>
    </div>
</div>


<!-- Modal for importing users -->
<div class="modal fade" id="importUsers" tabindex="-1" role="dialog" aria-labelledby="Import Users" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Import users</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Import users from CSV file.</p>
                <p>The file must contain 2 columns: name and email.</p>
                <form>
                    <div class="form-group">
                        <label for="csvFile">Choose the CSV file to parse</label>
                        <input type="file" class="form-control-file" id="csvFile" accept=".csv"
                            onchange="handleUpload()">
                    </div>
                    <div class="form-group"> <button type="button" class="btn btn-primary" id="processButton"
                            onclick="showParseResults()" style="display: none;">Process</button></div>

                </form>
                <div id="errors"></div>
                <table class="table table-sm ">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Email</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="results">
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="addUserList" style="display: none;">Add users</button>
            </div>
        </div>
    </div>
</div>


<div id="alert">

</div>

<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead>
            <tr>
                <th scope="col">Full Name</th>
                <th scope="col">Email</th>
                <th scope="col">Group</th>
                <th scope="col"></th>

            </tr>
        </thead>
        <tbody id="tbody">

        </tbody>
    </table>
</div>
<div id="pagination"></div>
<script>
    var userList = {{{ json userList }}}
    var role = {{{ json role }}}
</script>
<script src="/js/listUsers.js"></script>